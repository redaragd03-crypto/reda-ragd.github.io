<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>رفع وعرض الفيديوهات</title>
<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  color: white;
  text-align: center;
  padding: 20px;
}
h1 { margin-bottom: 20px; }
input, button { padding: 10px; margin: 10px; border-radius: 10px; border: none; }
button { cursor: pointer; background: #fff; color: #333; transition: 0.3s; }
button:hover { background: #333; color: white; }
.video-container video { width: 300px; margin: 5px; border-radius: 10px; }
</style>
</head>
<body>

<h1>رفع وعرض الفيديوهات</h1>

<input type="file" id="videoFile" accept="video/*">
<button onclick="uploadVideo()">رفع الفيديو</button>

<h2>فيديوهات الموقع</h2>
<div id="videosContainer" class="video-container"></div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
// إعداد Firebase
const firebaseConfig = {
  apiKey: "AIzaSyAe61P8lmdAQNYIhqIZ__xxYDmYlLhhiBw",
  authDomain: "reda-ragd.firebaseapp.com",
  databaseURL: "https://reda-ragd-default-rtdb.firebaseio.com/",
  projectId: "reda-ragd",
  storageBucket: "reda-ragd.appspot.com",
  messagingSenderId: "807567430584",
  appId: "1:807567430584:web:93a27b3e13266582e9754d"
};
firebase.initializeApp(firebaseConfig);
const storage = firebase.storage();
const db = firebase.database();

// رفع الفيديو
function uploadVideo() {
  const file = document.getElementById("videoFile").files[0];
  if(!file) { alert("اختر فيديو أولاً"); return; }
  
  const videoRef = storage.ref("videos/" + Date.now() + "_" + file.name);
  videoRef.put(file).then(snapshot => snapshot.ref.getDownloadURL())
  .then(url => {
    db.ref("videos").push({ url: url, name: file.name });
    alert("✅ تم رفع الفيديو بنجاح!");
    loadVideos();
  })
  .catch(err => alert("❌ خطأ: " + err.message));
}

// تحميل الفيديوهات
function loadVideos() {
  const container = document.getElementById("videosContainer");
  container.innerHTML = "";
  db.ref("videos").on("value", snapshot => {
    snapshot.forEach(child => {
      const video = child.val();
      container.innerHTML += `
        <video controls>
          <source src="${video.url}" type="video/mp4">
        </video>
      `;
    });
  });
}

// تحميل الفيديوهات عند فتح الصفحة
loadVideos();
</script>

</body>
</html>

